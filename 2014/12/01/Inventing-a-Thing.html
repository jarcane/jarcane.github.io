<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Inventing a Thing</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="//jarcane.github.io/themes/ichi/favicon.ico">

    <script type="text/javascript" src="//jarcane.github.io/themes/ichi/assets/js/vendor/fastclick.js?v=1.0.0"></script>
    <script type="text/javascript" src="//jarcane.github.io/themes/ichi/assets/js/vendor/modernizr.js?v=1.0.0"></script>


    <link rel="stylesheet" type="text/css" href="//jarcane.github.io/themes/ichi/assets/css/normalize.css?v=1.0.0" />
    <link rel="stylesheet" type="text/css" href="//jarcane.github.io/themes/ichi/assets/css/foundation.min.css?v=1.0.0" />
    <!--[if lte IE 8]>
        <link rel="stylesheet" type="text/css" href="//jarcane.github.io/themes/ichi/assets/css/outdatedBrowser.min.css?v=1.0.0">
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="//jarcane.github.io/themes/ichi/assets/fonts/foundation-icons/foundation-icons.css?v=1.0.0" />
    <link rel="stylesheet" type="text/css" href="//jarcane.github.io/themes/ichi/assets/css/styles.css?v=1.0.0" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans:300,700,400|Source+Sans+Pro:300,400,600,700,900,300italic,400italic,600italic,700italic,900italic" />

    <link rel="canonical" href="https://jarcane.github.io/2014/12/01/Inventing-a-Thing.html" />
    
    <meta property="og:site_name" content="Arcane Syntax" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Inventing a Thing" />
    <meta property="og:description" content="One of the more ambitious features I decided to attempt for Heresy was to create a new kind of struct-like syntax that would be easier and faster to use in-place in a functional style. Racket has a very robust struct..." />
    <meta property="og:url" content="https://jarcane.github.io/2014/12/01/Inventing-a-Thing.html" />
    <meta property="article:published_time" content="2014-11-30T22:00:00.000Z" />
    <meta property="article:modified_time" content="2015-07-09T18:54:42.917Z" />
    <meta property="article:tag" content="Heresy" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Inventing a Thing" />
    <meta name="twitter:description" content="One of the more ambitious features I decided to attempt for Heresy was to create a new kind of struct-like syntax that would be easier and faster to use in-place in a functional style. Racket has a very robust struct..." />
    <meta name="twitter:url" content="https://jarcane.github.io/2014/12/01/Inventing-a-Thing.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Arcane Syntax",
    "author": {
        "@type": "Person",
        "name": "John Berry",
        "image": "https://avatars.githubusercontent.com/u/8036258?v=3",
        "url": "undefined/author/undefined",
        "sameAs": "http://jarcane.github.com"
    },
    "headline": "Inventing a Thing",
    "url": "https://jarcane.github.io/2014/12/01/Inventing-a-Thing.html",
    "datePublished": "2014-11-30T22:00:00.000Z",
    "dateModified": "2015-07-09T18:54:42.917Z",
    "keywords": "Heresy",
    "description": "One of the more ambitious features I decided to attempt for Heresy was to create a new kind of struct-like syntax that would be easier and faster to use in-place in a functional style. Racket has a very robust struct..."
}
    </script>

    <meta name="generator" content="Ghost ?" />
    <link rel="alternate" type="application/rss+xml" title="Arcane Syntax" href="https://jarcane.github.io/rss" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
</head>
<body class="post-template tag-Heresy">

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdate" href="http://outdatedbrowser.com/">Update my browser now</a></p>
</div>

<nav class="top-bar hide-for-large-up" data-topbar style="background: none">
  <ul class="title-area">
    <li class="name">

    </li>
    <li class="home"><a class="fi-home" href="https://jarcane.github.io"></a></li>
    <li class="toggle-topbar"><a href="#" id="trigger-overlay" class="fi-list"></a></li>
  </ul>

<div class="overlay overlay-scale">
    <button type="button" class="overlay-close">Close</button>
    <nav>
        <ul>
            <li><a href="https://jarcane.github.io">Home</a></li>
        </ul>
    </nav>
</div>

</nav>

<div class="row">

<div class="small-16 medium-16 large-4 columns right head-area bgimage" style="background-image: url(http://jarcane.github.io/images/arcane_seals_by_draydenx-d5s2slo.jpg)">

<header class="site-head">
    <div class="vertical">
        <div class="site-head-content inner">
            <ul class="side-nav blog-menu show-for-large-up">
                <li><a class="fi-home" href="https://jarcane.github.io"></a></li>
                <li><a class="fi-torso" href="https://jarcane.github.io/about"></a></li>
                <li><a class="fi-mail" href="https://jarcane.github.io/contact"></a></li>
            </ul>
            <a class="blog-logo" href="https://jarcane.github.io"><img alt="Arcane Syntax" src="http://jarcane.github.io/images/lambdemic-big.png" alt="Blog Logo" /></a>
            <h1 class="blog-title">Arcane Syntax</h1>
            <hr>
            <p class="blog-description">An assortment of incantations and observations on the functional arts.</p>
            <div class="blog-network">
<!--                 <a href="#" class="fi-social-pinterest"></a>
                <a href="#" class="fi-social-linkedin"></a>
                <a href="#" class="fi-social-behance"></a>
                <a href="#" class="fi-social-deviant-art"></a>
                <a href="#" class="fi-social-dribbble"></a>
                <a href="#" class="fi-social-flickr"></a>
                <a href="#" class="fi-social-github"></a>
                <a href="#" class="fi-social-skype"></a>
                <a href="#" class="fi-social-snapchat"></a>
                <a href="#" class="fi-social-steam"></a>
                <a href="#" class="fi-social-xbox"></a>
                <a href="#" class="fi-social-reddit"></a> -->
                  <a href="https://github.com/jarcane" class="fi-social-github"></a>
                  <a href="https://twitter.com/J_Arcane" class="fi-social-twitter"></a>
            </div>
        </div>
    </div>
</header>

</div>


<div class="small-16 medium-16 large-12 columns main-column left">
    

<main class="content" role="main">

    <article class="post tag-Heresy">


            <h1 class="post-title">Inventing a Thing</h1>

            <span class="post-meta label"><time datetime="2014-12-01">01 Dec 2014</time></span>

            <section class="post-content">
                <div class="paragraph">
<p>One of the more ambitious features I decided to attempt for Heresy was
to create a new kind of struct-like syntax that would be easier and
faster to use in-place in a functional style. Racket has a very robust
struct system which I was initially quite enamored of, but which I soon
discovered could get quickly cumbersome to deal with. For Heresy, I
wanted something simpler.</p>
</div>
<div class="paragraph">
<p>So, some days ago I wrote myself
<a href="https://github.com/jarcane/heresy/issues/5">a spec</a> for something called
"Things," but set it aside because I was largely convinced it would take
a considerable amount of wizardry to pull it off. The spec contained a
considerable amount of functionality, from pattern-matching syntax to
inheritance and on.</p>
</div>
<div class="paragraph">
<p>I was wrong. It took me half a day. And
<a href="https://github.com/jarcane/heresy/commit/7dd1456cbeae767be786cbeb94d40c5ea645f325">only
29 lines of code.</a></p>
</div>
<div class="paragraph">
<p>Part of the secret of course to this was actually in the reading and
studying I did trying to learn more about combinators and other such
lambda-based wizardry. It took me about a week of gestating, but what I
realized is that what I needed wasn&#8217;t a static data structure with some
macrology attached to various names, but actually, all that syntax
needed to live in the data structure itself. Then inheritance and
renaming and copying and all that fun stuff comes for free.</p>
</div>
<div class="paragraph">
<p>The result is Things. We can define a new kind of Thing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>(describe Cthulhu (size 'Immense) (type 'Winged) (status 'sleeping))</pre>
</div>
</div>
<div class="paragraph">
<p>We can call values from Cthulhu:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; (Cthulhu 'size)
'Immense</pre>
</div>
</div>
<div class="paragraph">
<p>We can copy Cthulhu with new values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; ((Cthulhu * * 'awake) 'status)
'awake</pre>
</div>
</div>
<div class="paragraph">
<p>We can give a new name to Cthulhu:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; (def Dreamer Cthulhu)
&gt; (Dreamer 'type)
'Winged</pre>
</div>
</div>
<div class="paragraph">
<p>And we can make children of Cthulhu:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; (def Star-Spawn (Cthulhu 'Medium * 'awake))
&gt; (Star-Spawn 'size)
'Medium</pre>
</div>
</div>
<div class="paragraph">
<p>So how does it work? It&#8217;s all just a lambda. (describe &#8230;&#8203;) is a simple
macro wrapper that defines a name and seeds it with a call to (thing
&#8230;&#8203;), which is a helper function that returns a lambda containing a
closure that holds the actual alist that holds our values as well as the
argument handling code for calling and copying it. Indeed, copying
Things is just a recursive call to Thing with new values, and (thing
&#8230;&#8203;) can potentially be called anonymously just like lambdas can. And
because functions are first-class values, inheritence and value-passing
just come with the territory.</p>
</div>
<div class="paragraph">
<p>There is one weakness though:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; Cthulhu
#&lt;procedure:Cthulhu&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Because Things are just lambdas underneath, they read naked as
procedures, so they are not immediately transparent.</p>
</div>
<div class="paragraph">
<p>Instead, we have to do this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt; (Cthulhu)
'((size 'Immense) (type 'Winged) (status 'sleeping))</pre>
</div>
</div>
<div class="paragraph">
<p>Though on the upside, this is not merely a print routine: It actually
returns the naked alist underneath the snytax sugar, so you can mangle
it with assoc and subst or whatever other unspeakable horror you wish to
do to the Great Dreamer in the Deep.</p>
</div>
                        <aside class="tags fi-pricetag-multiple">Posted on <a href="https://jarcane.github.io/tag/Heresy">Heresy</a></aside>
            </section>
            <hr>
            <footer class="post-footer">

                <section class="share">
                    <h4>Liked this post ? Share it.</h4>
                    <a class="fi-social-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://jarcane.github.io/2014/12/01/Inventing-a-Thing.html"
                        onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    </a>
                    <a class="fi-social-twitter" href="https://twitter.com/share?text=Inventing%20a%20Thing&amp;url=https://jarcane.github.io/2014/12/01/Inventing-a-Thing.html"
                        onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    </a>
                    <a class="fi-social-google-plus" href="https://plus.google.com/share?url=https://jarcane.github.io/2014/12/01/Inventing-a-Thing.html"
                       onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    </a>
                </section>

                <section class="author">
                    <header>
                        <span>About the author</span>
                    </header>
                    <section>
                        <h4>John Berry</h4>
                        <img src="https://avatars.githubusercontent.com/u/8036258?v=3">
                        <span>Finland</span>
                        <a href="http://jarcane.github.com">http://jarcane.github.com</a>
                    </section>
                    <footer>
                         <p></p>
                    </footer>
                </section>

        <div class="clearfix"></div>
                    <hr>

            </footer>

        <h3 class="title-disqus"><span class="fi-comments"></span>Discussions</h3>




        <section class="post-comments">
          <div id="disqus_thread"></div>
          <script type="text/javascript">
          var disqus_shortname = 'jarcane'; // required: replace example with your forum shortname
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </section>


    </article>

</main>

</div>

</div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();      
      </script>

    <!--[if lte IE 8]>
        <script type="text/javascript" src="//jarcane.github.io/themes/ichi/assets/js/outdatedBrowser.min.js?v=1.0.0"></script>
    <![endif]-->
    <script type="text/javascript" src="//jarcane.github.io/themes/ichi/assets/js/min/built.js?v=1.0.0"></script>

    <script>
      $(document).foundation();
    </script>

</body>
</html>
